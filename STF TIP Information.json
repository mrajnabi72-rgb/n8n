{
  "name": "STF TIP Information",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "initialMessages": "Hi there! üëã\nMy name is Javed. How can I assist you today?",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        -880,
        -384
      ],
      "id": "f9a89174-6c23-4aae-b2c9-2b96dfcb8187",
      "name": "When chat message received",
      "webhookId": "c3ac0ef2-b5a4-48f6-bb97-6349956649de"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1E3z5p7-NSCsWXorP6ZcPZCzhiHlRaK7Kuy9mYhzd7Sw/edit?invite=COqQlp8L&gid=1363514854#gid=1363514854",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "Form responses 1",
          "mode": "name"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -656,
        -384
      ],
      "id": "0f5ba33e-8eac-464a-ba42-885832434292",
      "name": "Get row(s) in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "oHTFnaXwNsKn76e9",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// üîπ Final result array\nconst results = [];\n\n// üîπ Loop through ALL rows\nfor (const item of items) {\n  const row = item.json;\n\n  // üîπ Helper for complex / multiline headers\n  function getByIncludes(keyword) {\n    const key = Object.keys(row).find(k =>\n      k.replace(/\\s+/g, \" \").includes(keyword)\n    );\n    return key ? row[key] : \"\";\n  }\n\n  // üîπ Push structured data for each row\n  results.push({\n    RowNumber: row.row_number,\n    TipDate: row[\"Column 1\"],\n\n    ReporterEmailAddress: row[\"Email address\"],\n    ReporterName: row[\"NAME (‡§®‡§æ‡§Æ)\"],\n    ReporterFatherName: row[\"Father‚Äôs Name ( ‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ)\"],\n    ReporterAddress: row[\"Address (‡§™‡§§‡§æ)\"],\n    ReporterMobileNumber: row[\"Mobile Number ( ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞)\"],\n    ReporterEmailId: row[\"Email ID ( ‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§à‡§°‡•Ä)\"],\n\n    CrimeCategory: getByIncludes(\"II. CATEGORY OF CRIME\"),\n    SpecificAddress: row[\"Specific Address (‡§∏‡§ü‡•Ä‡§ï ‡§™‡§§‡§æ)\"],\n    CityTownVillage: row[\"City ‡§∂‡§π‡§∞/Town ‡§ï‡§∏‡•ç‡§¨‡§æ/Village ‡§ó‡§æ‡§Ç‡§µ\"],\n    State: row[\"State (‡§∞‡§æ‡§ú‡•ç‡§Ø)\"],\n    District: row[\"District (‡§ú‡§ø‡§≤‡§æ)\"],\n    PinCode: row[\"Pin Code ‡§™‡§ø‡§®‡§ï‡•ã‡§° (if known/‡§Ø‡§¶‡§ø ‡§ú‡•ç‡§û‡§æ‡§§ ‡§π‡•ã)\"],\n\n    SuspectName: row[\"Name (‡§®‡§æ‡§Æ)\"],\n    SuspectFatherName: row[\"Father's Name (‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ)\"],\n    SuspectMotherName: row[\"Mother's Name (‡§Æ‡§æ‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ)\"],\n    SuspectAliasOrNickname: row[\"Alias/Nickname ‡§â‡§™‡§®‡§æ‡§Æ (if any/‡§Ø‡§¶‡§ø ‡§ï‡•ã‡§à ‡§π‡•ã)\"],\n    \n    SuspectPhoneNumber: row[\"Phone Number (‡§´‡•ã‡§®‡§®‡§Ç‡§¨‡§∞)\"],\n    SuspectPersonalIdNumbers: row[\"Personal ID Numbers ‡§™‡§π‡§ö‡§æ‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ (if any/‡§Ø‡§¶‡§ø‡§ï‡•ã‡§à‡§π‡•ã)\"],\n    SuspectResidentialAddress: row[\"Residential Address (‡§®‡§ø‡§µ‡§æ‡§∏ ‡§™‡§§‡§æ)\"],\n\n    GangAffiliation: row[\"Gang Affiliation (‡§ó‡•à‡§Ç‡§ó ‡§ï‡§æ ‡§®‡§æ‡§Æ)\"],\n    WhatsAppNumber: row[\"WhatsApp Number (‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§®‡§Ç‡§¨‡§∞)\"],\n    TelegramHandle: row[\"Telegram Handle (‡§ü‡•á‡§≤‡•Ä‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§π‡•à‡§Ç‡§°‡§≤)\"],\n    InstagramId: row[\"Instagram ID (‡§á‡§Ç‡§∏‡•ç‡§ü‡§æ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§Ü‡§à‡§°‡•Ä)\"],\n    FacebookId: row[\"Facebook ID (‡§´‡•á‡§∏‡§¨‡•Å‡§ï ‡§Ü‡§à‡§°‡•Ä)\"],\n    SnapchatId: row[\"Snapchat ID (‡§∏‡•ç‡§®‡•à‡§™‡§ö‡•à‡§ü ‡§Ü‡§à‡§°‡•Ä)\"],\n\n    OtherEncryptedApps: row[\"Signal ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤/ Zangi  ‡§ú‡§º‡•à‡§Ç‡§ó‡•Ä/ Other Encrypted Apps ‡§Ö‡§®‡•ç‡§Ø ‡§è‡§®‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü‡•á‡§° ‡§ê‡§™‡•ç‡§∏\"],\n    EncryptedAppsDetails: getByIncludes(\"Encrypted\"),\n    SocialMediaProfileLinks: getByIncludes(\"Social Media Profile Links\"),\n\n    ScreenshotsChatLogsPosts: getByIncludes(\"Screenshots\"),\n    FinancialTransactionDetails: getByIncludes(\"Financial Transaction Details\"),\n    VideoRecordingsOrCctvClips: row[\"Video Recordings ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó / CCTV Clips ‡§∏‡•Ä‡§∏‡•Ä‡§ü‡•Ä‡§µ‡•Ä ‡§´‡•Å‡§ü‡•á‡§ú\"],\n    AudioRecordings: row[\"Audio Recordings  (‡§ë‡§°‡§ø‡§Ø‡•ã ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó)\"],\n    ScreenshotsOfChatsPostsImages: getByIncludes(\"Screenshots (of chats/posts/images)\"),\n    DocumentsOrIdProof: getByIncludes(\"Documents/ID proof related to suspect\"),\n    VehicleOrPropertyDetails: row[\"Vehicle ‡§µ‡§æ‡§π‡§®/Property Details ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä\"],\n    OtherMaterials: row[\"Other Materials  ‡§Ö‡§®‡•ç‡§Ø ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä (specify/‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡§ï‡§∞‡•á‡§Ç)\"],\n    BriefDescription: row[\"(Please describe briefly what you know ‚Äì Max. 500 words / ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§Ç‡§ï‡•ç‡§∑‡•á‡§™ ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§Ç ‚Äì ‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ 500 ‡§∂‡§¨‡•ç‡§¶)\"],\n    Remark: row[\"Column 37\"]\n  });\n}\n\n// ?? Take last 10, then remove last 2 from them\nconst finalRecords = results.slice(-10, -2);\n\nreturn [{\n  json: {\n    total_records: finalRecords.length,\n    records: finalRecords\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -416,
        -384
      ],
      "id": "c2316dc0-191b-4703-84ab-f77dbc81010a",
      "name": "Code in JavaScript"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        []
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "6d1b95f5-22b2-4400-9ed1-92e067f11252",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "fc8ea56a9f77461efdbaf4ab14000fda259d6eb0a0ad047cd98c8f84ded3bdb0"
  },
  "id": "qBCyJqGpD95YjZ6l",
  "tags": []
}